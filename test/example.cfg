process PROD  = {

        source = PoolSource { 
                untracked vstring fileNames = {'file:CaloTowers_HB_HO.root' }
                untracked int32 maxEvents = -1           
        }
        
        module caloTowers = CaloTowerCandidateProducer {
            string src = "towermaker"
        }

        block common_jet_parameters = {
                untracked int32 debugLevel = 0
                double seedThreshold = 3.0
                double towerThreshold = 1.0
                double coneAreaFraction = 1.0
                int32 maxPairSize = 2
                int32 maxIterations = 100
                double overlapThreshold = .75
        }
                
        module mcone5 =  MidpointJetProducer {
                string src = "caloTowers"
                using common_jet_parameters
                double coneRadius = 0.5
        }
  
        module mcone7 =  MidpointJetProducer {
                string src = "caloTowers"
                using common_jet_parameters
                double coneRadius = 0.7
        }


//        service = Timing { }

//        service = SimpleMemoryCheck {
//                untracked int32 ignoreTotal = -1 # default is one
//        } 

        untracked PSet options = {
           untracked bool wantSummary = true  # default is false
           untracked bool makeTriggerResults = true 
           vstring listOfTriggers = {"p1","p2"}
        }


//
// the following is not the most efficient configuration
// but allows to show the features possible, and how
// the trigger and timing reports are structured
//
        module hlt1jet = HLTSimpleJet {
                string input = "mcone7"
                double ptcut = 1000.0
                int32  njcut = 1
        }

        module prescale1 = Prescaler {
                int32 prescaleFactor = 2
        }

        module hlt2jet = HLTSimpleJet {
                string input = "mcone5"
                double ptcut = 100.0
                int32  njcut = 2
        }

        module prescale2 = Prescaler {
                int32 prescaleFactor = 3
        }

//      non trigger paths

        path dum1 = {caloTowers}
        path dum2 = {caloTowers}

//      trigger paths

        path p1 = {caloTowers, mcone7, hlt1jet, prescale1}
        path p2 = {caloTowers, mcone5, hlt2jet, prescale2} 

        endpath end = {out}

        module out = PoolOutputModule {
          untracked string fileName = 'file:MidpointJets_HB_HO_2.root'
          untracked PSet SelectEvents = {
          vstring SelectEvents = { "p1","p2" }
          }
        }

}
