process PROD = {

   service = RandomNumberGeneratorService {
      untracked uint32 sourceSeed = 98765
   }

//
// Particle Gun as source
//

   source = FlatRandomPtGunSource { 
      untracked uint32 firstRun  =  1
      untracked int32  maxEvents = 25 
      untracked PSet  PGunParameters = {
         # you can request more than 1 particle
         #untracked vint32  PartID = { 211, 11, -13 }
         untracked vint32 PartID = {-11,11,-13,13,-15,15,22,22,111,111,111,-211,211}
         untracked double MinEta = -3.5
         untracked double MaxEta =  3.5
         #
         # phi must be given in radians
         #
         untracked double MinPhi = -3.14159265358979323846
         untracked double MaxPhi =  3.14159265358979323846
         untracked double MinPt  = 100.00
         untracked double MaxPt  = 900.00
      }
      untracked int32 Verbosity = 1 # set to 1 (or greater)  for printouts
    }
        
//        service = Timing { }

//        service = SimpleMemoryCheck {
//                untracked int32 ignoreTotal = -1 # default is one
//        } 

//
// the following is not the most efficient configuration
// but allows to show the features possible, and how
// the trigger and timing reports are structured
//


// Fake data producers

        module reco1 = HLTProdCand {
                uint32 n = 10
                double scale = 100.
        }

        module reco2 = HLTProdCand {
                uint32 n = 20
                double scale =  50.
        }


// HLT filter modules

        module hlt1 = HLTFiltCand {
                string srcPhot = "reco1"
                string srcElec = "reco1"
                string srcMuon = "reco1"
                string srcJets = "reco1"
                double ptPhot  = 620.
                double ptElec  = 620.
                double ptMuon  = 620.
                double ptJets  = 620.
        }

        module hlt2 = HLTFiltCand {
                string srcPhot = "reco2"
                string srcElec = "reco2"
                string srcMuon = "reco2"
                string srcJets = "reco2"
                double ptPhot  = 230.
                double ptElec  = 230.
                double ptMuon  = 230.
                double ptJets  = 230.
        }


// Prescaler modules

        module presc1 = HLTPrescaler {
                bool   makeFilterObject = true
                uint32 prescaleFactor = 2
        }

        module presc2 = HLTPrescaler {
                bool   makeFilterObject = true
                uint32 prescaleFactor = 3
        }


// HLT modules to make HLT path objects

        module p1c = HLTMakePathObject {
                vstring labels = {"hlt1" , "presc1"}
                vuint32 indices= {0, 1}
        }
        module p2c = HLTMakePathObject {
                vstring labels = {"hlt2" , "presc2"}
                vuint32 indices= {0, 1}
        }


// HLT module to make HLT global object

        module glob = HLTMakeGlobalObject{
                vstring labels = {"p1c", "p2c"}
                vuint32 indices= {0,1}
        }


// Actual trigger paths

        path p1 = {reco1, hlt1, presc1, p1c}
        path p2 = {reco2, hlt2, presc2, p2c} 


// Final wrap-up analysis modules

        endpath end = {glob, anal1, anal, out}

        module anal1 = HLTAnalCand {
            string src = "hlt1"
        }

        module anal =  EventContentAnalyzer {}


// Want trigger table summary in log file & results object
// with specified triggers

        untracked PSet options = {
           untracked bool wantSummary = true  # default is false
           untracked bool makeTriggerResults = true 
           vstring listOfTriggers = {"p1","p2"}
        }


// Writing out the data structures

        module out = PoolOutputModule {
          untracked string fileName = 'file:HLToutput.root'
          untracked PSet SelectEvents = {
          vstring SelectEvents = { "p1","p2" }
          }
        }

}
